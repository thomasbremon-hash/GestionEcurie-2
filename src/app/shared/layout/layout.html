<!-- NAVBAR -->
<nav class="navbar">
  <div class="navbar-title">Ã‰curie Manager</div>

  <div class="navbar-links">
    <a routerLink="/" (click)="sidebarService.hideSidebar()">Accueil</a>
    <button (click)="sidebarService.showSidebar('admin')">Admin</button>
    <button (click)="sidebarService.showSidebar('gestionnaire')">Gestionnaire</button>
    <button (click)="sidebarService.showSidebar('collaborateurs')">Collaborateurs</button>
    <button (click)="sidebarService.showSidebar('client')">Client</button>
    <button (click)="sidebarService.showSidebar('comptabilite')">ComptabilitÃ©</button>

    <!-- ðŸ”¹ Dynamique via signal -->
    @if (!auth.isLoggedIn()) {
      <a routerLink="/login" class="login-link">Connexion</a>
    }
    @if (!auth.isLoggedIn()) {
      <a routerLink="/register" class="login-link">Inscription</a>
    }
    @if (!auth.isLoggedIn()) {
      <a routerLink="/registerEmail" class="login-link"
        >Inscription Email</a
        >
      }
      @if (auth.isLoggedIn()) {
        <a (click)="onLogout()" class="logout-link">DÃ©connexion</a>
      }
    </div>
  </nav>

  <!-- PAGE WRAPPER -->
  <div class="page-wrapper">
    @if (sidebarService.isVisible()) {
      <aside class="sidebar">
        <div class="sidebar-header">
          <h3>{{ sidebarService.currentSection() }}</h3>
          <button class="close-btn" (click)="sidebarService.hideSidebar()">âœ•</button>
        </div>
        <ul class="menu-list">
          @for(menu of sidebarService.menuItems(); track $index){
            <li>
              <div class="menu-item" (click)="toggleMenu(menu.label)">
                <span>{{ menu.label }}</span>
                <span class="arrow">{{ openMenu() === menu.label ? 'â–²' : 'â–¼' }}</span>
              </div>
              @if(openMenu() === menu.label && menu.subItems?.length){
                <ul class="submenu">
                  @for(sub of menu.subItems; track $index){
                    <li
                      (click)="onSubClick(sub, $event)"
                      [class.hovered]="hover()"
                      (mouseover)="hover.set(true)"
                      (mouseleave)="hover.set(false)"
                      >
                      {{ sub.label }}
                    </li>
                  }
                </ul>
              }
            </li>
          }
        </ul>
      </aside>
    }

    <main class="main-content">
      <router-outlet></router-outlet>
    </main>
  </div>
